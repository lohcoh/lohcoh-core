@namespace LowKode.Core.Components

@using LowKode.Core.Metadata
@using LowKode.Core.Context
@using Microsoft.AspNetCore.Components.Rendering

@inject ILowKodeContext lkContext
@inject ILowKodeMetaService lkMeta

@componentFragment


@code {
        RenderFragment componentFragment;

    protected override void OnInitialized()
    {
        var componentSpecification = lkContext.First<IComponentSiteSpecification>();
        var componentType = lkMeta.Select<IComponentSiteMapping>(lkContext)
            .Where(m => m.ComponentType == componentSpecification.ComponentType
                && m.ModelType == componentSpecification.ComponentType
                && m.ModelMember == componentSpecification.ModelMember);

        componentFragment= new ComponentSiteFragment(componentType, lkContext);

    }
}

