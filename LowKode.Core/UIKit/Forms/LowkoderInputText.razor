@using LowKode.Core.Metadata
@using LowKode.Core.Configuration
@using Microsoft.AspNetCore.Components.Forms
@namespace LowKode.Core.Components
@inject ILowkoderService lowkoder


@using (lowkoder.RenderWithSite(site))
{
    Model = site.Context.ComponentSiteSpecification.Model;
    MemberPath = site.Context.ComponentSiteSpecification.ModelMember;
    <InputText id="name" @bind-Value="MemberValue" />
}


@code {
    object Model;
    MemberPath MemberPath;
    IComponentSite site;

    public string MemberValue
    {
        get { return Convert.ToString(MemberPath.Get(Model)); }
        set { MemberPath.Set(Model, value); }
    }
    
    protected override void OnInitialized()
    {
        base.OnInitialized();
        site = lowkoder.CreateSite();
    }
}