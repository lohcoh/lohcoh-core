@using LowKode.Core.Metadata
@using LowKode.Core.Configuration
@using Microsoft.AspNetCore.Components.Forms
@namespace LowKode.Core.Components
@inject ILowkoderService lowkoder
    <Scope OnInit="BindModel">
        @if (isMultiline)
        {
            <InputTextArea @bind-Value="MemberValue" />
        }
        else
        {
            <InputText @bind-Value="MemberValue" />
        }
    </Scope>
@code {
    object Model;
    MemberPath MemberPath;
    bool isMultiline = false;

    public string MemberValue
    {
        get { return Convert.ToString(MemberPath.Get(Model)); }
        set { MemberPath.Set(Model, value); }
    }

    void BindModel(IComponentSite site)
    {
        Model = site.Context.SiteSpecification.Model;
        MemberPath = site.Context.SiteSpecification.ModelMember;
        if (MemberPath.TargetProperty.DataType == System.ComponentModel.DataAnnotations.DataType.MultilineText)
        {
            isMultiline = true;
        }
    }
}