# Customization

lowkode has support for two common requirements for customization...
- The ability to customize UI components and model data.  For instance, 
	- add an extra link to the application navbar for a particular customer
	- or display search results using a different set of fields, depending on the current user's role.
- The ability to customize the visual aspects of the UI via CSS.  For instance, set the application navbar background to black.
lowkode doesn't explicitly concern itself with visual styling.  
To support visual styling, a lowkode Component's associated DOM element can be decorated with custom classes.  
Rules are used to add these custom classes to components.

## Overview of how lowkode works

The Lowkode service generates a UI from Metadata, Components, and Rules

The lowkode system is comprised of...
- A repository of Metadata.
	Lowcode collects metadata from many parts of an application and saves this data in a MetadataRepository.
	Metadata includes schemas for objects, component mappings, available web services, UI contributions, etc.
	Lowkode can be extended with custom metadata providers.
- A repository of Rules
	Rules modify the metadata in a MetadataRepository given a Specification.
	Rules are contributed to the lowkode service in your Startup class.
	Examples of what can be done with Rules...
	- globally replace the component used to display dates
	- use a custom Card component when displaying an Album in a Card and the Album won a Grammy.
	- Add an additional Report to the Report menu for a specific customer
	- When displaying an Employee in a Form, make the SSN field optional when the client is not located in the US.
- One or more libraries of Lowcode Components
	Lowkode Components are Razor Components that use a MetadataRepository to construct a UI for some input data.
	Lowcode Components are initialized with a MetadataRepository that has been mutated by Rules.
	That is, the metadata in the MetadataRepository is customized for the specific component and it's context.
- One or more libraries of Tags
	Tags are Razor Components that are placeholders for Components.
	Tags are used to create Blazor templates, at runtime, Tags use the lowkode service to get thier replacement Lowcode Component.
- A Context object.
	A Context is a collection of key/value pairs that describe any runtime aspects of the current application needed to create a customized component.
	A reference to the currently authenticated User is a common value to include in a Context.
	The lowkode service contains a single Context object that is shared among all components in an application.

The process by which lowkode creates a replacement Lowkode Component for a Tag is where the lowkode magic happens.
...to be continued


Before
- Metadata: lowcode collects metadata from many parts of an application saves this data in it's own MetadataRepository.
	Metadata includes schemas for objects, component mappings, available web services, UI contributions, etc.
	Lowkode can be extended with custom metadata providers.
- Specification: A Specification is a collection of key/value pairs that describe any runtime parameters needed to create a component.
	A Specification contains...
	- the tag associated with the component, the tag denotes the type of component to create
	- the view model object to be displayed by the component.
	In addition, a Specification includes global values, like the currently authenticated user.
- Rules:  Rules modify the metadata in a MetadataRepository given a Specification.
	Rules are contributed to the lowkode service in your Startup class.
	Examples of what can be done with Rules...
	- globally replace the component used to display dates
	- use a custom Card component when displaying an Album in a Card and the Album won a Grammy.
	- Add an additional Report to the Report menu for a specific customer
	- When displaying an Employee in a Form, make the SSN field optional when the client is not located in the US.
- Context: A Context is a Specification/Metadata pair that a Component uses to generate it's content.  
	The Metadata associated with the Specification is a modified version of lowkode's global Metadata repository.
	This modified Metadata is generated from lowkode's global Metadata repository by applying all available Rules to the global Metadata, the resulting 
	Metadata is then used to initialize a Component.
- Components: UI elements that display objects in a given Context.
	Every Component is initialized with it's own Context, the exact UI generated by a component is influenced by the metadata provided by the Context.

## How Components, Metadata, and Rules work together
This section describes how Components, Metadata, and Rules work together.
To recap, lowkode has a global repository of all Rules and a repository of all kinds of metadata.

- Context:  A container of runtime data and services? that is injected into every Component.
	A Context is a kind of service provider.  A new Context can be created from an existing Context, the Metadata and Components provided by the 
	new Context may be different from that provided by the parent Context, depending on the data used to construct the new Context.
	Components may not modify Contexts, Contexts may only be modified by Rules.
	Rules are only executed when a new Context is created.

Lowkode is 'customized' by adding Rules to the lowkode Rule service.
Rules have triggers and actions.  
Rules can be triggered by matching values to elements in a given Context.
Actions modify the context to create a new context.


## Multidimensional selectors
Here's an incomplete? list of parameters used to select a UI part...
- The current context
	For example, hide a UI element if the current user does not a permission to access.
- The domain model associated with the element, if any
	Attributes on the associated domain model can determine how the element is displayed.
	For instance, a property can be marked as required.
- The tag associated with the element
	The tag specifics how the associated view model should be displayed.
	That is, a <Form> tag will display a domain object differently than a <Card> element.
- The view model.
	Properties of the view model can determine how the element is displayed.
	For instance, suppose you want to customise the Title background color on <Card> elements that 
	display Employees based on the Department to which the Employee belongs.


## Properties

### Field/Property Titles
Json Schema Property: title
C# : System.ComponentModel.DataAnnotations.DisplayAttribute
Add an 'x-lowkode-annotations' object to properties that will propagate data from the System.ComponentModel.DataAnnotations attributes
	

